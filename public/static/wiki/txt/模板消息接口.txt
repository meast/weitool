<p>模板消息仅用于公众号向用户发送重要的服务通知，只能用于符合其要求的服务场景中，如信用卡刷卡通知，商品购买成功通知等。不支持广告等营销类消息以及其它所有可能对用户造成骚扰的消息。</p><p>关于使用规则，请注意：</p><pre>1、所有服务号都可以在功能-&gt;添加功能插件处看到申请模板消息功能的入口，但只有认证后的服务号才可以申请模板消息的使用权限并获得该权限；2、需要选择公众账号服务所处的2个行业，每月可更改1次所选行业；3、在所选择行业的模板库中选用已有的模板进行调用；4、每个账号可以同时使用10个模板。5、当前每个模板的月调用上限为10000次。</pre><p>关于接口文档，请注意：</p><pre>1、模板消息调用时主要需要模板ID和模板中各参数的赋值内容；2、模板中参数内容必须以".DATA"结尾，否则视为保留字；3、模板保留符号"{{ }}"。</pre><table id="toc" class="toc"><tr><td><div id="toctitle"><h2>目录</h2></div><ul><li class="toclevel-1 tocsection-1"><a href="#.E8.8E.B7.E5.BE.97.E6.A8.A1.E6.9D.BFID"><span class="tocnumber">1</span> <span class="toctext">获得模板ID</span></a></li><li class="toclevel-1 tocsection-2"><a href="#.E5.85.B7.E4.BD.93.E8.B0.83.E7.94.A8.E6.96.B9.E6.B3.95"><span class="tocnumber">2</span> <span class="toctext">具体调用方法</span></a></li><li class="toclevel-1 tocsection-3"><a href="#.E4.BA.8B.E4.BB.B6.E6.8E.A8.E9.80.81"><span class="tocnumber">3</span> <span class="toctext">事件推送</span></a></li><li class="toclevel-1 tocsection-4"><a href="#.E8.BF.94.E5.9B.9E.E7.A0.81.E8.AF.B4.E6.98.8E"><span class="tocnumber">4</span> <span class="toctext">返回码说明</span></a></li></ul></td></tr></table><h2> <span class="mw-headline" id=".E8.8E.B7.E5.BE.97.E6.A8.A1.E6.9D.BFID"> 获得模板ID </span></h2><p>在公众平台线上模板库中选用模板获得ID</p><h2> <span class="mw-headline" id=".E5.85.B7.E4.BD.93.E8.B0.83.E7.94.A8.E6.96.B9.E6.B3.95"> 具体调用方法 </span></h2><p><b>接口调用请求说明</b></p><pre>http请求方式: POST<a href="https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=ACCESS_TOKEN" class="external free" rel="nofollow">https://api.weixin.qq.com/cgi-bin/message/template/send?access_token=ACCESS_TOKEN</a></pre><p><b>POST数据说明</b></p><p>POST数据示例如下：</p><pre>      {           "touser":"OPENID",           "template_id":"ngqIpbwh8bUfcSsECmogfXcV14J0tQlEpBO27izEYtY",           "url":"<a href="http://weixin.qq.com/download" class="external free" rel="nofollow">http://weixin.qq.com/download</a>",           "topcolor":"#FF0000",           "data":{                   "first": {                       "value":"您好，您已成功消费。",                       "color":"#0A0A0A"                   },                   "keynote1":{                       "value":"巧克力",                       "color":"#CCCCCC"                   },                   "keynote2": {                       "value":"39.8元",                       "color":"#CCCCCC"                   },                   "keynote3":{                       "value":"2014年9月16日",                       "color":"#CCCCCC"                   },                   "remark":{                       "value":"欢迎再次购买。",                       "color":"#173177"                   }           }       }      </pre><p>显示效果：</p><p><a href="http://mp.weixin.qq.com/wiki/index.php??title=%E6%96%87%E4%BB%B6:Example.jpg" target="_blank" class="image"><img alt="Example.jpg" src="wiki/images/a/a9/Example.jpg" width="540" height="960" /></a></p><h2> <span class="mw-headline" id=".E4.BA.8B.E4.BB.B6.E6.8E.A8.E9.80.81"> 事件推送 </span></h2><p>在模版消息发送任务完成后，微信服务器会将是否送达成功作为通知，发送到开发者中心中填写的服务器配置地址中。</p><p>1、送达成功时，推送的XML如下：</p><pre>           &lt;xml&gt;           &lt;ToUserName&gt;&lt;![CDATA[gh_7f083739789a]]&gt;&lt;/ToUserName&gt;           &lt;FromUserName&gt;&lt;![CDATA[oia2TjuEGTNoeX76QEjQNrcURxG8]]&gt;&lt;/FromUserName&gt;           &lt;CreateTime&gt;1395658920&lt;/CreateTime&gt;           &lt;MsgType&gt;&lt;![CDATA[event]]&gt;&lt;/MsgType&gt;           &lt;Event&gt;&lt;![CDATA[TEMPLATESENDJOBFINISH]]&gt;&lt;/Event&gt;           &lt;MsgID&gt;200163836&lt;/MsgID&gt;           &lt;Status&gt;&lt;![CDATA[success]]&gt;&lt;/Status&gt;           &lt;/xml&gt;</pre><p>参数说明</p><table border="1" cellspacing="0" cellpadding="4" align="center" width="640px"><tr><th style="width:120px">参数</th><th>说明</th></tr><tr><td> ToUserName</td><td> 公众号微信号</td></tr><tr><td> FromUserName</td><td> 接收模板消息的用户的openid</td></tr><tr><td> CreateTime</td><td> 创建时间</td></tr><tr><td> MsgType</td><td> 消息类型是事件</td></tr><tr><td> Event</td><td> 事件为模板消息发送结束</td></tr><tr><td> MsgID</td><td> 消息id</td></tr><tr><td> Status</td><td> 发送状态为成功</td></tr></table><p>2、送达由于用户拒收（用户设置拒绝接收公众号消息）而失败时，推送的XML如下：</p><pre>           &lt;xml&gt;           &lt;ToUserName&gt;&lt;![CDATA[gh_7f083739789a]]&gt;&lt;/ToUserName&gt;           &lt;FromUserName&gt;&lt;![CDATA[oia2TjuEGTNoeX76QEjQNrcURxG8]]&gt;&lt;/FromUserName&gt;           &lt;CreateTime&gt;1395658984&lt;/CreateTime&gt;           &lt;MsgType&gt;&lt;![CDATA[event]]&gt;&lt;/MsgType&gt;           &lt;Event&gt;&lt;![CDATA[TEMPLATESENDJOBFINISH]]&gt;&lt;/Event&gt;           &lt;MsgID&gt;200163840&lt;/MsgID&gt;           &lt;Status&gt;&lt;![CDATA[failed:user block]]&gt;&lt;/Status&gt;           &lt;/xml&gt;</pre><p>参数说明</p><table border="1" cellspacing="0" cellpadding="4" align="center" width="640px"><tr><th style="width:120px">参数</th><th>说明</th></tr><tr><td> ToUserName</td><td> 公众号微信号</td></tr><tr><td> FromUserName</td><td> 接收模板消息的用户的openid</td></tr><tr><td> CreateTime</td><td> 创建时间</td></tr><tr><td> MsgType</td><td> 消息类型是事件</td></tr><tr><td> Event</td><td> 事件为模板消息发送结束</td></tr><tr><td> MsgID</td><td> 消息id</td></tr><tr><td> Status</td><td> 发送状态为用户拒绝接收</td></tr></table><p>3、送达由于其他原因失败时，推送的XML如下：</p><pre>           &lt;xml&gt;           &lt;ToUserName&gt;&lt;![CDATA[gh_7f083739789a]]&gt;&lt;/ToUserName&gt;           &lt;FromUserName&gt;&lt;![CDATA[oia2TjuEGTNoeX76QEjQNrcURxG8]]&gt;&lt;/FromUserName&gt;           &lt;CreateTime&gt;1395658984&lt;/CreateTime&gt;           &lt;MsgType&gt;&lt;![CDATA[event]]&gt;&lt;/MsgType&gt;           &lt;Event&gt;&lt;![CDATA[TEMPLATESENDJOBFINISH]]&gt;&lt;/Event&gt;           &lt;MsgID&gt;200163840&lt;/MsgID&gt;           &lt;Status&gt;&lt;![CDATA[failed: system failed]]&gt;&lt;/Status&gt;           &lt;/xml&gt;</pre><p>参数说明</p><table border="1" cellspacing="0" cellpadding="4" align="center" width="640px"><tr><th style="width:120px">参数</th><th>说明</th></tr><tr><td> ToUserName</td><td> 公众号微信号</td></tr><tr><td> FromUserName</td><td> 接收模板消息的用户的openid</td></tr><tr><td> CreateTime</td><td> 创建时间</td></tr><tr><td> MsgType</td><td> 消息类型是事件</td></tr><tr><td> Event</td><td> 事件为模板消息发送结束</td></tr><tr><td> MsgID</td><td> 消息id</td></tr><tr><td> Status</td><td> 发送状态为发送失败（非用户拒绝）</td></tr></table><p><br />       </p><h2> <span class="mw-headline" id=".E8.BF.94.E5.9B.9E.E7.A0.81.E8.AF.B4.E6.98.8E"> 返回码说明 </span></h2><p>在调用模板消息接口后，会返回JSON数据包。正常时的返回JSON数据包示例：</p><pre>    {           "errcode":0,           "errmsg":"ok",           "msgid":200228332       }</pre><p>参数说明</p><table border="1" cellspacing="0" cellpadding="4" align="center" width="640px"><tr><th style="width:120px">返回码</th><th>说明</th></tr><tr><td> -1</td><td> 系统繁忙</td></tr><tr><td> 0</td><td> 请求成功</td></tr><tr><td> 40001</td><td> 验证失败</td></tr><tr><td> 40002</td><td> 不合法的凭证类型</td></tr><tr><td> 40003</td><td> 不合法的OpenID</td></tr><tr><td> 40004</td><td> 不合法的媒体文件类型</td></tr><tr><td> 40005</td><td> 不合法的文件类型</td></tr><tr><td> 40006</td><td> 不合法的文件大小</td></tr><tr><td> 40007</td><td> 不合法的媒体文件id</td></tr><tr><td> 40008</td><td> 不合法的消息类型</td></tr><tr><td> 40009</td><td> 不合法的图片文件大小</td></tr><tr><td> 400010</td><td> 不合法的语音文件大小</td></tr><tr><td> 400011</td><td> 不合法的视频文件大小</td></tr><tr><td> 400012</td><td> 不合法的缩略图文件大小</td></tr><tr><td> 400013</td><td> 不合法的APPID</td></tr><tr><td> 41001</td><td> 缺少access_token参数</td></tr><tr><td> 41002</td><td> 缺少appid参数</td></tr><tr><td> 41003</td><td> 缺少refresh_token参数</td></tr><tr><td> 41004</td><td> 缺少secret参数</td></tr><tr><td> 41004</td><td> 缺少secret参数</td></tr><tr><td> 41004</td><td> 缺少secret参数</td></tr><tr><td> 41004</td><td> 缺少secret参数</td></tr><tr><td> 41004</td><td> 缺少secret参数</td></tr><tr><td> 41005</td><td> 缺少多媒体文件数据</td></tr><tr><td> 41006</td><td> access_token超时</td></tr><tr><td> 42001</td><td> 需要GET请求</td></tr><tr><td> 43003</td><td> 需要HTTPS请求</td></tr><tr><td> 44002</td><td> POST的数据包为空</td></tr><tr><td> 44003</td><td> 图文消息内容为空</td></tr><tr><td> 45001</td><td> 多媒体文件大小超过限制</td></tr><tr><td> 45002</td><td> 消息内容超过限制</td></tr><tr><td> 45003</td><td> 标题字段超过限制</td></tr><tr><td> 45004</td><td> 描述字段超过限制</td></tr><tr><td> 45006</td><td> 图片链接字段超过限制</td></tr><tr><td> 45007</td><td> 语音播放时间超过限制</td></tr><tr><td> 45008</td><td> 图文消息超过限制</td></tr><tr><td> 46001</td><td> 不存在媒体数据</td></tr><tr><td> 47001</td><td> 解析JSON/XML内容错误</td></tr></table><!-- NewPP limit reportPreprocessor node count: 18/1000000Post-expand include size: 0/2097152 bytesTemplate argument size: 0/2097152 bytesExpensive parser function count: 0/100--><div class="printfooter">取自“<a href="http://mp.weixin.qq.com/wiki/index.php?title=%E6%A8%A1%E6%9D%BF%E6%B6%88%E6%81%AF%E6%8E%A5%E5%8F%A3">http://mp.weixin.qq.com/wiki/index.php?title=%E6%A8%A1%E6%9D%BF%E6%B6%88%E6%81%AF%E6%8E%A5%E5%8F%A3</a>”</div>